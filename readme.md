# assemble-handle [![NPM version](https://img.shields.io/npm/v/assemble-handle.svg?style=flat)](https://www.npmjs.com/package/assemble-handle) [![NPM downloads](https://img.shields.io/npm/dm/assemble-handle.svg?style=flat)](https://npmjs.org/package/assemble-handle) [![Build Status](https://img.shields.io/travis/assemble/assemble-handle.svg?style=flat)](https://travis-ci.org/assemble/assemble-handle)

Assemble pipeline plugin for handling custom middleware stages.

## Install

Install with [npm](https://www.npmjs.com/):

```sh
$ npm install assemble-handle --save
```

## Usage

Examples using some built-in stages:

```js
var assemble = require('assemble');
var handle = require('assemble-handle');
var app = assemble();

app.onStream(/\.(js|css)$/, function(file, next) {
  // lint javascript
  file.dirname = path.join(file.dirname, file.extname);
  next();
});

app.preWrite(/\.(jpg|png)$/, function(file, next) {
  // minify images
  next();
});

app.postWrite(/some\/junk/, function(file, next) {
  // delete junk
  next();
});

app.task('site', function() {
  return app.src('assets/**/*.*')
    .pipe(handle(app, 'onStream'))  // onStream
    .pipe(handle(app, 'preWrite'))  // preWrite
    .pipe(app.dest('site/'));
    .pipe(handle(app, 'postWrite')) // postWrite
});
```

## Custom handlers

Create custom middleware handlers.

```js
app.handler('onFoo');
```

This adds an `.onFoo` method to the instance:

```js
app.onFoo(/\.hbs$/, function(file, next) {
  // do stuff to file
  next();
});
```

All `.onFoo` middleware will now run when the `onFoo` handler is called:

```js
app.task('default', function() {
  return app.src('*.hbs')

    // call the `onFoo` handler
    .pipe(handle(app, 'onFoo')) 
});
```

## Related projects

You might also be interested in these projects:

* [assemble](https://www.npmjs.com/package/assemble): Assemble is a powerful, extendable and easy to use static site generator for node.js. Used… [more](https://www.npmjs.com/package/assemble) | [homepage](https://github.com/assemble/assemble)
* [assemble-core](https://www.npmjs.com/package/assemble-core): The core assemble application with no presets or defaults. All configuration is left to the… [more](https://www.npmjs.com/package/assemble-core) | [homepage](https://github.com/assemble/assemble-core)
* [assemble-fs](https://www.npmjs.com/package/assemble-fs): Assemble plugin to add methods to assemble for working with the file system, like src,… [more](https://www.npmjs.com/package/assemble-fs) | [homepage](https://github.com/assemble/assemble-fs)
* [assemble-streams](https://www.npmjs.com/package/assemble-streams): Assemble pipeline plugin for pushing a view collection into a vinyl stream. | [homepage](https://github.com/assemble/assemble-streams)

## Contributing

Pull requests and stars are always welcome. For bugs and feature requests, [please create an issue](https://github.com/assemble/assemble-handle/issues/new).

## Building docs

Generate readme and API documentation with [verb][]:

```sh
$ npm install verb && npm run docs
```

Or, if [verb][] is installed globally:

```sh
$ verb
```

## Running tests

Install dev dependencies:

```sh
$ npm install -d && npm test
```

## Author

**Jon Schlinkert**

* [github/jonschlinkert](https://github.com/jonschlinkert)
* [twitter/jonschlinkert](http://twitter.com/jonschlinkert)

## License

Copyright © 2016, [Jon Schlinkert](https://github.com/jonschlinkert).
Released under the [MIT license](https://github.com/assemble/assemble-handle/blob/master/LICENSE).

***

_This file was generated by [verb](https://github.com/verbose/verb), v0.9.0, on May 17, 2016._